import os
import shutil
print("This calls the file and adds it to exploitdb".upper())
pathToDatabase = "/usr/share/exploitdb/"
pathToMetasploit = "/root/.msf4/modules"
# exploits/multiple/remote/47573.rb - Sample input file
pathToFile = "exploits/multiple/remote/47573.rb"
pathToFile = input("Path to exploit \n(EXAMPLE: exploits/multiple/remote/47573.rb) \nPath: ")
splitFile = pathToFile.split("/")
exploitName = splitFile[len(splitFile) - 1]
splitFile.pop()
# Checking if the modules exist already.
for firstDir in splitFile:
    newDir = pathToMetasploit + "/" + firstDir
    print("Checking if '" + str(newDir) + "' is a directory.")
    print("Does the directory exist: " + str(os.path.isdir(newDir)))
    checkDir = os.path.isdir(newDir)
    if checkDir == False:
        print("Making directory: " + newDir)
        os.mkdir(newDir)
        pathToMetasploit = newDir
    else:
        pathToMetasploit = newDir


# This is the part that will copy the file from exploitdb
# os.path.exists
endDir = "/root/.msf4/modules/"+ pathToFile
pullDir = pathToDatabase + pathToFile
print("Copying '" + pullDir + "' file to '" + endDir + "'")
print(shutil.copyfile(pullDir, endDir))
